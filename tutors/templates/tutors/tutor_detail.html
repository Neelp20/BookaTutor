{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-lg p-4">
        <div class="row g-3">
            <!-- Tutor Photo -->
            <div class="col-md-4 text-center">
                {% if tutor.profile_picture %}
                    <img src="{{ tutor.profile_picture.url }}" class="img-fluid rounded-circle mb-3" alt="{{ tutor.user.username }}">
                {% else %}
                    <img src="{% static 'images/default-profile.png' %}" class="img-fluid rounded-circle mb-3" alt="Default Profile">
                {% endif %}
            </div>

            <!-- Tutor Info -->
            <div class="col-md-8">
                <h2 class="fw-bold">{{ tutor.user.get_full_name|default:tutor.user.username }}</h2>
                <p><strong>Subjects:</strong> {{ tutor.subjects.all|join:", " }}</p>
                <p><strong>Bio:</strong> {{ tutor.bio|default:"No bio available." }}</p>
                <p><strong>Experience:</strong> {{ tutor.experience }} years</p>
                <p><strong>Hourly Rate:</strong> ${{ tutor.hourly_rate }}</p>

                <!-- Book a Session button (only for logged-in students) -->
                {% if user.is_authenticated and not user.is_staff and not user.is_superuser and not user.tutor %}
                    <a href="{% url 'bookings' %}?tutor={{ tutor.id }}" class="btn btn-success btn-lg mt-3">Book a Session</a>
                {% elif not user.is_authenticated %}
                    <a href="{% url 'account_login' %}?next={% url 'bookings' %}?tutor={{ tutor.id }}" class="btn btn-primary btn-lg mt-3">Login to Book</a>
                {% endif %}
            </div>
        </div>
    </div>

    {% if request.user == tutor.user %}
        <div class="mt-4">
            <a href="{% url 'update-tutor' tutor.pk %}" class="btn btn-warning">Edit Profile</a>
            <a href="{% url 'delete-tutor' tutor.pk %}" class="btn btn-danger">Delete Profile</a>
        </div>
    {% endif %}
</div>
{% endblock %}


